import{u as C}from"./open-hands-axios-bwh8x0Ai.js";import{u as m}from"./brand-button-CwmiDb9A.js";import{u as N}from"./module-eUUeIAmF.js";import{u as l,D as c}from"./use-settings-DphRp9S7.js";import{O}from"./open-hands-Dol13NBS.js";const S=async _=>{var e,o;const a={llm_model:_.LLM_MODEL,llm_base_url:_.LLM_BASE_URL,agent:_.AGENT||c.AGENT,language:_.LANGUAGE||c.LANGUAGE,confirmation_mode:_.CONFIRMATION_MODE,security_analyzer:_.SECURITY_ANALYZER,llm_api_key:_.llm_api_key===""?"":((e=_.llm_api_key)==null?void 0:e.trim())||void 0,remote_runtime_resource_factor:_.REMOTE_RUNTIME_RESOURCE_FACTOR,enable_default_condenser:_.ENABLE_DEFAULT_CONDENSER,enable_sound_notifications:_.ENABLE_SOUND_NOTIFICATIONS,user_consents_to_analytics:_.user_consents_to_analytics,provider_tokens_set:_.PROVIDER_TOKENS_SET,mcp_config:_.MCP_CONFIG,enable_proactive_conversation_starters:_.ENABLE_PROACTIVE_CONVERSATION_STARTERS,search_api_key:((o=_.SEARCH_API_KEY)==null?void 0:o.trim())||""};await O.saveSettings(a)},R=()=>{const _=C(),{data:a}=l();return m({mutationFn:async e=>{var r,n,s,t;const o={...a,...e};if(e.MCP_CONFIG&&(a==null?void 0:a.MCP_CONFIG)!==e.MCP_CONFIG){const u=!!e.MCP_CONFIG,E=((n=(r=e.MCP_CONFIG)==null?void 0:r.sse_servers)==null?void 0:n.length)||0,i=((t=(s=e.MCP_CONFIG)==null?void 0:s.stdio_servers)==null?void 0:t.length)||0;N.capture("mcp_config_updated",{has_mcp_config:u,sse_servers_count:E,stdio_servers_count:i})}await S(o)},onSuccess:async()=>{await _.invalidateQueries({queryKey:["settings"]})},meta:{disableToast:!0}})};export{R as u};
