import{u as k}from"./useQuery-C1weQHjG.js";import{O as h}from"./open-hands-Dol13NBS.js";import{j as r,a as O,b as m,l as f}from"./ui-Cq19CwDI.js";import{R as E}from"./router-CPryua6o.js";import{I as n}from"./declaration-DtqZiF37.js";import{u as P}from"./useTranslation-8HK8Q2x7.js";const N=async()=>({models:await h.getModels(),agents:await h.getAgents(),securityAnalyzers:await h.getSecurityAnalyzers()}),K=()=>k({queryKey:["ai-config-options"],queryFn:N,staleTime:1e3*60*5,gcTime:1e3*60*15}),C=t=>!Number.isNaN(Number(t)),R=["openai","azure","anthropic","deepseek"],S=["o3-mini-2025-01-31","o3-2025-04-16","o4-mini-2025-04-16","claude-3-5-sonnet-20241022","claude-3-7-sonnet-20250219","claude-sonnet-4-20250514","claude-opus-4-20250514","deepseek-chat"],V=["gpt-4o","gpt-4o-mini","gpt-4-turbo","gpt-4","gpt-4-32k","o1-mini","o1","o3","o3-2025-04-16","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16"],v=["claude-2","claude-2.1","claude-3-5-sonnet-20240620","claude-3-5-sonnet-20241022","claude-3-5-haiku-20241022","claude-3-haiku-20240307","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-7-sonnet-20250219","claude-sonnet-4-20250514","claude-opus-4-20250514"],w=t=>t[1]&&t[1][0]&&C(t[1][0]),j=t=>{let a="/",l=t.split(a);if(l.length===1&&(a=".",l=t.split(a),w(l)&&(l=[l.join(a)])),l.length===1)return V.includes(l[0])?{provider:"openai",model:l[0],separator:"/"}:v.includes(l[0])?{provider:"anthropic",model:l[0],separator:"/"}:{provider:"",model:t,separator:""};const[s,...d]=l;return{provider:s,model:d.join(a),separator:a}},W=t=>{const a={};return t.forEach(l=>{const{separator:s,provider:d,model:i}=j(l);if(d==="anthropic"&&s===".")return;const c=d||"other";a[c]||(a[c]={separator:s,models:[]}),a[c].models.push(i)}),a},y={openai:"OpenAI",azure:"Azure",azure_ai:"Azure AI Studio",vertex_ai:"VertexAI",palm:"PaLM",gemini:"Gemini",anthropic:"Anthropic",sagemaker:"AWS SageMaker",bedrock:"AWS Bedrock",mistral:"Mistral AI",anyscale:"Anyscale",databricks:"Databricks",ollama:"Ollama",perlexity:"Perplexity AI",friendliai:"FriendliAI",groq:"Groq",fireworks_ai:"Fireworks AI",cloudflare:"Cloudflare Workers AI",deepinfra:"DeepInfra",ai21:"AI21",replicate:"Replicate",voyage:"Voyage AI",openrouter:"OpenRouter"},A=t=>Object.keys(y).includes(t)?y[t]:t;function G({isDisabled:t,models:a,currentModel:l,onChange:s}){var g,b;const[,d]=E.useState(null),[i,c]=E.useState(null),[I,x]=E.useState(null);E.useEffect(()=>{if(l){const{provider:e,model:p}=j(l);d(l),c(e),x(p)}},[l]);const M=e=>{var u;c(e),x(null);const p=((u=a[e])==null?void 0:u.separator)||"";d(e+p)},_=e=>{var L;const p=((L=a[i||""])==null?void 0:L.separator)||"";let u=i+p+e;i==="openai"&&(u=e),d(u),x(e),s==null||s(u)},D=()=>{c(null),d(null)},{t:o}=P();return r.jsxs("div",{className:"flex flex-col md:flex-row w-[full] md:w-[680px] justify-between gap-4 md:gap-[46px]",children:[r.jsxs("fieldset",{className:"flex flex-col gap-2.5 w-full",children:[r.jsx("label",{className:"text-sm",children:o(n.LLM$PROVIDER)}),r.jsxs(O,{"data-testid":"llm-provider-input",isRequired:!0,isVirtualized:!1,name:"llm-provider-input",isDisabled:t,"aria-label":o(n.LLM$PROVIDER),placeholder:o(n.LLM$SELECT_PROVIDER_PLACEHOLDER),isClearable:!1,onSelectionChange:e=>{e!=null&&e.toString()&&M(e.toString())},onInputChange:e=>!e&&D(),defaultSelectedKey:i??void 0,selectedKey:i,classNames:{popoverContent:"bg-tertiary rounded-xl border border-[#717888]"},inputProps:{classNames:{inputWrapper:"bg-tertiary border border-[#717888] h-10 w-full rounded-sm p-2 placeholder:italic"}},children:[r.jsx(m,{title:o(n.MODEL_SELECTOR$VERIFIED),children:Object.keys(a).filter(e=>R.includes(e)).map(e=>r.jsx(f,{"data-testid":`provider-item-${e}`,children:A(e)},e))}),r.jsx(m,{title:o(n.MODEL_SELECTOR$OTHERS),children:Object.keys(a).filter(e=>!R.includes(e)).map(e=>r.jsx(f,{children:A(e)},e))})]})]}),r.jsxs("fieldset",{className:"flex flex-col gap-2.5 w-full",children:[r.jsx("label",{className:"text-sm",children:o(n.LLM$MODEL)}),r.jsxs(O,{"data-testid":"llm-model-input",isRequired:!0,isVirtualized:!1,name:"llm-model-input","aria-label":o(n.LLM$MODEL),placeholder:o(n.LLM$SELECT_MODEL_PLACEHOLDER),isClearable:!1,onSelectionChange:e=>{e!=null&&e.toString()&&_(e.toString())},isDisabled:t||!i,selectedKey:I,defaultSelectedKey:I??void 0,classNames:{popoverContent:"bg-tertiary rounded-xl border border-[#717888]"},inputProps:{classNames:{inputWrapper:"bg-tertiary border border-[#717888] h-10 w-full rounded-sm p-2 placeholder:italic"}},children:[r.jsx(m,{title:o(n.MODEL_SELECTOR$VERIFIED),children:(g=a[i||""])==null?void 0:g.models.filter(e=>S.includes(e)).map(e=>r.jsx(f,{children:e},e))}),r.jsx(m,{title:o(n.MODEL_SELECTOR$OTHERS),children:(b=a[i||""])==null?void 0:b.models.filter(e=>!S.includes(e)).map(e=>r.jsx(f,{"data-testid":`model-item-${e}`,children:e},e))})]})]})]})}function B({testId:t,text:a,linkText:l,href:s}){return r.jsxs("p",{"data-testid":t,className:"text-xs",children:[a," ",r.jsx("a",{href:s,rel:"noreferrer noopener",target:"_blank",className:"underline underline-offset-2",children:l})]})}export{B as H,G as M,j as e,W as o,K as u};
