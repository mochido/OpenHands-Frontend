import{w as h,u as x,c as T,R as S}from"./router-CPryua6o.js";import{j as e}from"./ui-Cq19CwDI.js";import{u as g,B as j}from"./brand-button-CwmiDb9A.js";import{I as s}from"./declaration-DtqZiF37.js";import{S as C}from"./all-hands-logo-K5d9hBiw.js";import{u as l}from"./useTranslation-8HK8Q2x7.js";import{h as b}from"./handle-capture-consent-D5Lep1P7.js";import{o as O}from"./open-hands-axios-bwh8x0Ai.js";import"./vendor-Csw2ODfV.js";import"./mutation-C1zRO6D6.js";import"./utils-SnfsJp9N.js";import"./i18nInstance-DBIXdvxg.js";import"./module-eUUeIAmF.js";function N({onChange:o}){const{t}=l();return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",onChange:o}),e.jsxs("span",{children:[t(s.TOS$ACCEPT)," ",e.jsx("a",{href:"https://www.all-hands.dev/tos",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2 text-blue-500 hover:text-blue-700",children:t(s.TOS$TERMS)})]})]})}const D=h(function(){const{t}=l(),m=x(),[p]=T(),[c,d]=S.useState(!1),i=p.get("redirect_url")||"/",{mutate:u,isPending:a}=g({mutationFn:async()=>(b(!0),O.post("/api/accept_tos",{redirect_url:i})),onSuccess:n=>{const r=n.data.redirect_url||i;r.startsWith("http://")||r.startsWith("https://")?window.location.href=r:m(r)}}),f=()=>{c&&!a&&u()};return e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsxs("div",{className:"border border-tertiary p-8 rounded-lg max-w-md w-full flex flex-col gap-6 items-center bg-base-secondary",children:[e.jsx(C,{width:68,height:46}),e.jsxs("div",{className:"flex flex-col gap-2 w-full items-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t(s.TOS$ACCEPT_TERMS_OF_SERVICE)}),e.jsx("p",{className:"text-sm text-gray-500",children:t(s.TOS$ACCEPT_TERMS_DESCRIPTION)})]}),e.jsx(N,{onChange:()=>d(n=>!n)}),e.jsx(j,{isDisabled:!c||a,type:"button",variant:"primary",onClick:f,className:"w-full",children:t(a?s.HOME$LOADING:s.TOS$CONTINUE)})]})})});export{D as default};
